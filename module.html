<template id="x-foo-from-template">
<style>
  p {
    font-size: 5rem;
    font-style: italic;
    color: red;
  }
</style>
  <p>
    <slot/>
  </p>
</template>

<script>
  class XFoo extends HTMLElement {
    constructor () {
      super()
      const shadowRoot = this.attachShadow({ mode: 'open' })
      const t = document.currentScript.ownerDocument.querySelector('#x-foo-from-template')
      const instance = t.content.cloneNode(true)
      shadowRoot.appendChild(instance)
    }
  }

  window.customElements.define('fancy-p', XFoo)
</script>
